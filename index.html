<!DOCTYPE html>
<html class=" js " lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<title>Peta Bahasa</title>
		<meta name="description" content="Peta Bahasa">
		<meta name="keywords" content="sliding menu, pushing menu, navigation, responsive, menu, css, jquery">
		<meta name="author" content="Codrops">
		<!--link rel="shortcut icon" href="http://tympanus.net/Blueprints/favicon.ico"-->
		<link rel="stylesheet" type="text/css" href="css/default.css">
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css">
		<script src="js/modernizr.js"></script>
		<script type="text/javascript" src="js/data_area.json"></script>
		<script type="text/javascript" src="js/data_mapping_area.json"></script>
		<script type="text/javascript" src="js/data_event.json"></script>
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
	</head>
	<body>
		<nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-right" id="cbp-spmenu-s2">
			<div><span class="label label-danger" id="closeRight">close</span></div>
		</nav>
		<nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" id="cbp-spmenu-s1">
			<div class="panel panel-default">
			  <div class="panel-heading pointer" onclick="$('#bodyCari').slideToggle()">Pencarian</div>
			  <div class="panel-body" id="bodyCari">
			  	<!--div class="form-group">
					<input type="text" class="form-control" placeholder="Search">
				</div-->
				<select class="form-control" id="selProvinsi">
				  <option>Semua Provinsi</option>
				  <option>Banten</option>
				  <option>Jakarta</option>
				  <option>Jawa Barat</option>
				  <option>Jawa Tengah</option>
				  <option>Yogyakarta</option>
				  <option>Jawa Timur</option>
				  <option>Banten</option>
				  <option>Jakarta</option>
				</select>
				<h3>Kondisi :</h3>
			    <div class="radio">
				  <label>
				    <input type="radio" name="optionsRadios" id="optRad1" value="opt1" checked>
				    Semua
				  </label>
				</div>
				<div class="radio">
				  <label>
				    <input type="radio" name="optionsRadios" id="optRad2" value="opt2">
				    Punah
				  </label>
				</div>
				<div class="radio">
				  <label>
				    <input type="radio" name="optionsRadios" id="optRad3" value="opt3">
				    Aktif (Non Punah)
				  </label>
				</div>
				<button type="button" class="btn btn-primary" id="btnSeleksi" onclick="changeProvince()">Cari !</button>
			  </div>
			</div>
			<div class="panel panel-default">
			  <div class="panel-heading pointer" onclick="$('#bodyBahasa').slideToggle()">Bahasa</div>
			  <div class="panel-body panelmenu" id="bodyBahasa">
			    <div class="contain-bahasa-dialek">
				    <div class="checkbox">
					    <label>
					      <input type="checkbox"> Bahasa 1
						</label>
					</div>
					<div class="checkbox">
					    <label>
					      <input type="checkbox"> Bahasa 1
						</label>
					</div>
					<div class="checkbox">
					    <label>
					      <input type="checkbox"> Bahasa 1
						</label>
					</div>
					<div class="checkbox">
					    <label>
					      <input type="checkbox"> Bahasa 1
						</label>
					</div>
					<div class="checkbox">
					    <label>
					      <input type="checkbox"> Bahasa 1
						</label>
					</div>
				</div>
			  </div>
			</div>
			<div class="panel panel-default">
			  <div class="panel-heading pointer" onclick="$('#bodyDialek').slideToggle()">Dialek</div>
			  <div class="panel-body panelmenu" id="bodyDialek">
			    <div class="contain-bahasa-dialek">
				    <div class="checkbox">
					    <label>
					      <input type="checkbox"> Dialek 1
						</label>
					</div>
					<div class="checkbox">
					    <label>
					      <input type="checkbox"> Dialek 1
						</label>
					</div>
					<div class="checkbox">
					    <label>
					      <input type="checkbox"> Dialek 1
						</label>
					</div>
					<div class="checkbox">
					    <label>
					      <input type="checkbox"> Dialek 1
						</label>
					</div>
					<div class="checkbox">
					    <label>
					      <input type="checkbox"> Dialek 1
						</label>
					</div>
				</div>
			  </div>
			</div>
			<div class="panel panel-default">
			  <div class="panel-heading pointer" onclick="$('#bodyTranslasi').slideToggle()">Translasi Kata</div>
			  <div class="panel-body" id="bodyTranslasi">
			    <div class="form-group">
				    <label for="translasi-kata">Masukkan kata</label>
					<input type="text" class="form-control" id="translasi-kata" name="translasi-kata" placeholder="kata yang ingin dicari">
					<button  type="button" class="btn btn-success btn-sm btnTranslasi" id="btnTranslasi">Translasi !</button>
				</div>
			  </div>
			</div>
		</nav>
		<div class="main-map" id="main-map"><!--PETA GMAP--></div>
		<section id="btnMenu">
			<button class="" id="showLeft">Lihat Menu</button>
		</section>
		<!-- Classie - class helper functions by @desandro https://github.com/desandro/classie -->
		<script src="js/classie.js"></script>
		<script src="js/endangered.json"></script>
		<script src="js/jquery-1.11.1.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script>
			var provinces = new Array();
			var imaps = {map:null,listmarkers:[],listinfo:[]};
			var menuLeft = document.getElementById( 'cbp-spmenu-s1' ),
				menuRight = document.getElementById( 'cbp-spmenu-s2' ),
				showLeft = document.getElementById( 'showLeft' ),
				closeRight = document.getElementById( 'closeRight' ),
				btnMenu = document.getElementById( 'btnMenu' ),
				body = document.body;
			closeRight.onclick = function(){
				classie.remove(menuRight, 'cbp-spmenu-open' );
				/* classie.toggle(menuRight, 'cbp-spmenu-open' ); */
			};
			showLeft.onclick = function() {
				classie.toggle( this, 'active' );
				classie.toggle( btnMenu, 'active' );
				classie.toggle( menuLeft, 'cbp-spmenu-open' );
				if (classie.has( this, 'active' ))
					this.innerHTML = "Tutup Menu";
				else
					this.innerHTML = "Lihat Menu";
			};
			function getPin(stat,label){
				var pinColor;
				switch (stat){
					case 'Vulnerable' :
						pinColor = "ecf0f1";
						break;
					case 'Definitely endangered' :
						pinColor = "f1c40f";
						break;
					case 'Severely endangered' :
						pinColor = "e67e22";
						break;
					case 'Critically endangered' :
						pinColor = "e74c3c";
						break;
					case 'Extinct' :
						pinColor = "7f8c8d";
						break;
					default:
						pinColor = "3498db";
				}
				//console.log(pinColor);
			    var pinImage = new google.maps.MarkerImage("http://www.googlemapsmarkers.com/v1/"+label+"/"+pinColor+"/",
			        new google.maps.Size(21, 34),
			        new google.maps.Point(0,0),
			        new google.maps.Point(10, 34));
			    
			    return pinImage;
			};
			function initialize() {
			  var myLatlng = new google.maps.LatLng(endangered[0][5], endangered[0][6]);
			  var mapOptions = {
			    zoom: 5,
			    center: myLatlng,
			    mapTypeId: google.maps.MapTypeId.TERRAIN
			  };
			  imaps.map = new google.maps.Map(document.getElementById('main-map'),
			      mapOptions);
		        //tampilkan
		        for (key in endangered){
		        	var contentInfo = '<div class="info-punah"><p>Bahasa : '+endangered[key][1]+'</p>'+
		        						'<p>Status Bahasa: '+endangered[key][2]+'</p>'+
		        						'<p>Jumlah Penutur : '+endangered[key][3]+'</p>'+
		        						'<p>Status Penutur : '+endangered[key][4]+'</p>'+
		        						'<p>Provinsi : '+endangered[key][7]+'</p>';
		        	var infowindow = new google.maps.InfoWindow();
		        	imaps.listinfo.push(contentInfo);
		        	//
				    var pinImage = getPin(endangered[key][2],endangered[key][4])
		          var marker = new google.maps.Marker({
		            position: new google.maps.LatLng(endangered[key][5], endangered[key][6]),
		            title:endangered[key][1]+", "+endangered[key][7],
		            icon: pinImage,
		            map: imaps.map
		          });
		          imaps.listmarkers.push(marker);
		          //
		          google.maps.event.addListener(marker, 'click', (function(marker, contentInfo) {
                       return function() {
                         infowindow.setContent(contentInfo);
                         infowindow.open(imaps.map, marker);
                       }
                 })(marker, contentInfo));
		        }
			};
			function clearLayer(){
				while(provinces.length!=0){
					var p = provinces[0];
					p.setMap(null);
					provinces.splice(0, 1);
				};				
			}
			function showArea(areaName){
				clearLayer();
				for (key in data_area){
					if(data_area[key][1] == areaName){
						addLayer(data_area[key][1], data_area[key][3]);
					}
				}		
			}
			function addLayer(pName, location){
				  var kmlLayer = new google.maps.KmlLayer({
					url: location,
					suppressInfoWindows: true,
					map: imaps.map,
					name:pName
				  });

				  provinces.push(kmlLayer);
				  google.maps.event.addListener(kmlLayer, 'click', function(kmlEvent) {
					alert(kmlLayer.name);
				  });
				
			}
			function removeLayer(name){
				for(var i=0;i<provinces.length;i++){
					if(provinces[i].name == name){
						var p = provinces[i];
						p.setMap(null);
						provinces.splice(i, 1);
						break;
					}
				};		
			}			
			function changeProvince(){
				showArea(document.getElementById("selProvinsi").value);
			}
			function getEventInfo(idBahasa){
				for (key in data_event){
					if(data_event[key][7] == idBahasa){
						return data_event[key];
						break;
					}
				}						
			}
			google.maps.event.addDomListener(window, 'load', initialize);
			alert(getEventInfo(1)); // contoh pemanggilan get info
		</script>
	</body>
</html>